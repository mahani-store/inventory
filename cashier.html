<!doctype html>
<html lang="id" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kasir - Mahani Inventori</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="css/tailwind-config.js"></script>
    <link rel="stylesheet" href="css/cashier.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quagga/0.12.1/quagga.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/idb@7/build/umd.js"></script>
  </head>
  <body class="bg-pink-100 text-gray-800 min-h-screen flex">
    <!-- Wrapper utama -->
    <div class="flex flex-1">
      <!-- Header Mobile -->
      <header
        class="lg:hidden bg-gradient-to-r from-primary-900 to-primary-800 text-white p-4 flex items-center justify-between shadow-md fixed top-0 left-0 right-0 z-50"
      >
        <h1 class="text-2xl font-bold tracking-tight">
          MAHANI <span class="text-purple-300">INVENTORI</span>
        </h1>
        <p class="text-sm text-blue-200 mt-1 opacity-80">
          Sistem Inventori Modern
        </p>
        <button id="hamburgerBtn" class="text-3xl focus:outline-none">
          ‚ò∞
        </button>
      </header>

      <!-- SIDEBAR -->
      <aside
        id="sidebar"
        class="fixed inset-y-0 left-0 w-72 bg-gradient-to-b from-primary-900 to-primary-800 text-white flex flex-col shadow-xl transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40 lg:static lg:inset-auto"
      >
        <div class="p-6 border-b border-purple-700/30">
          <h1 class="text-2xl font-bold tracking-tight">
            MAHANI <span class="text-purple-300">INVENTORI</span>
          </h1>
          <p class="text-xs text-blue-200 mt-1 opacity-80">
            Sistem Inventori Modern
          </p>
        </div>

        <nav class="flex-1 px-3 py-6 space-y-1 overflow-y-auto">
          <a
            href="dashboard.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üè†</span> Dashboard
          </a>
          <a
            href="cashier.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 text-white font-medium transition"
          >
            <span class="text-xl mr-4">üñ•Ô∏è</span> Kasir
          </a>
          <a
            href="manual-transaction.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üõí</span> Penjualan
          </a>

          <div
            class="pt-4 pb-2 px-4 text-xs font-semibold text-blue-200 uppercase tracking-wider opacity-80"
          >
            Produk
          </div>

          <a
            href="search-product.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üîç</span> Cari Produk
          </a>
          <a
            href="product-list.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üìã</span> Daftar Produk
          </a>
          <a
            href="restock-product.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üì¶</span> Restock Produk
          </a>
          <a
            href="add-product.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">‚ûï</span> Tambah Produk
          </a>
          <a
            href="categories.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üìÅ</span> Kelola Kategori
          </a>

          <div
            class="pt-4 pb-2 px-4 text-xs font-semibold text-blue-200 uppercase tracking-wider opacity-80"
          >
            Laporan & Riwayat
          </div>

          <a
            href="#"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üìä</span> Laporan Keuangan
          </a>
          <a
            href="transaction-history.html"
            class="flex items-center px-4 py-3 rounded-lg hover:bg-blue-700/40 transition"
          >
            <span class="text-xl mr-4">üìú</span> Riwayat Transaksi
          </a>
        </nav>

        <!-- Footer Sidebar -->
        <div class="p-4 border-t border-purple-700/30 text-sm">
          <div class="flex items-center justify-between">
            <div>
              <p>¬© 2026 Mahani Inventori</p>
              <p class="text-xs opacity-70">
                Dibuat oleh Arunika Mahani Amertha
              </p>
            </div>
          </div>
        </div>
      </aside>

      <!-- Overlay gelap saat sidebar mobile terbuka -->
      <div
        id="overlay"
        class="fixed inset-0 bg-black/50 hidden lg:hidden z-30"
      ></div>

      <!-- Main Content -->
      <main class="flex-1 flex flex-col lg:flex-row">
        <!-- Bagian Kiri: Produk & Search -->
        <div class="flex-1 p-6 bg-white border-r border-gray-200">
          <h2 class="text-2xl font-bold mb-6">Pilih Produk</h2>
          <!-- Tombol Scanner -->
          <button
            id="scanBtn"
            class="bg-primary-700 text-white px-6 py-3 rounded-lg hover:bg-primary-800 transition flex items-center gap-2"
          >
            <span class="text-xl">üì∑</span> Scan Barcode
          </button>

          <!-- Modal Scanner (hidden dulu) -->
          <div
            id="scannerModal"
            class="fixed inset-0 bg-black/80 hidden flex items-center justify-center z-50"
          >
            <div class="bg-white rounded-2xl p-6 w-full max-w-lg mx-4">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Scan Barcode</h3>
                <button
                  id="closeScanner"
                  class="text-3xl text-gray-600 hover:text-gray-800"
                >
                  &times;
                </button>
              </div>
              <div
                id="scannerContainer"
                class="relative w-full h-64 bg-gray-200 rounded-lg overflow-hidden"
              >
                <video
                  id="scannerVideo"
                  autoplay
                  playsinline
                  class="w-full h-full object-cover"
                ></video>
                <div class="absolute inset-0 flex items-center justify-center">
                  <div
                    class="border-4 border-red-500 w-3/4 h-1/2 rounded-lg"
                  ></div>
                </div>
              </div>
              <p class="text-center text-sm text-gray-500 mt-4">
                Arahkan barcode ke kamera...
              </p>
            </div>
          </div>

          <!-- Search Bar -->
          <input
            type="text"
            id="searchInput"
            placeholder="Cari nama produk..."
            class="w-full px-4 py-3 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-700"
          />

          <!-- Grid Produk -->
          <div
            id="productGrid"
            class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-4"
          ></div>
        </div>

        <!-- Bagian Kanan: Cart -->
        <div
          class="w-full lg:w-96 bg-gray-50 p-4 sm:p-6 flex flex-col lg:border-l border-gray-200"
        >
          <h2 class="text-2xl font-bold mb-6">Keranjang</h2>

          <!-- Daftar Item di Cart -->
          <div id="cartItems" class="flex-1 overflow-y-auto mb-6"></div>

          <!-- Total & Bayar -->
          <div class="border-t pt-4">
            <div class="flex justify-between mb-2">
              <span class="font-medium">Subtotal</span>
              <span id="subtotal" class="font-bold">Rp 0</span>
            </div>
            <div class="flex justify-between mb-2">
              <span class="font-medium">Diskon (%)</span>
              <input
                type="number"
                id="diskon"
                min="0"
                max="100"
                value="0"
                class="w-20 text-right border rounded px-2"
              />
            </div>
            <div class="flex justify-between text-xl font-bold mb-4">
              <span>Total</span>
              <span id="total" class="text-primary-700">Rp 0</span>
            </div>

            <!-- Metode Bayar -->
            <select id="metodeBayar" class="w-full p-3 mb-4 border rounded-lg">
              <option>Pilih Metode Pembayaran</option>
              <option>Cash</option>
              <option>QRIS</option>
              <option>Transfer</option>
              <option>Debit/Kredit</option>
            </select>

            <!-- Uang Dibayarkan & Kembalian (KHUSUS CASH) -->
            <div id="cashPaymentSection" class="hidden mt-4 space-y-3">
              <div class="flex justify-between items-center">
                <span class="font-medium">Uang Dibayarkan</span>
                <input
                  type="number"
                  id="uangDibayarkan"
                  min="0"
                  placeholder="Masukkan nominal"
                  class="w-40 text-right border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-700"
                />
              </div>
              <div class="flex justify-between text-lg font-bold">
                <span>Kembalian</span>
                <span id="kembalian" class="text-green-600">Rp 0</span>
              </div>
            </div>

            <div class="flex gap-4 mt-6">
              <button
                onclick="clearCart()"
                class="flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700"
              >
                Batal
              </button>
              <button
                onclick="prosesBayar()"
                class="flex-1 bg-primary-700 text-white py-3 rounded-lg hover:bg-primary-800"
              >
                Bayar
              </button>
            </div>
          </div>
        </div>
      </main>
    </div>
    <script src="js/cashier.js"></script>
  </body>
</html>
